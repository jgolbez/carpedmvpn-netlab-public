name: ospf-lab2-network-types

topology:
  nodes:
    # Broadcast segment switch/hub
    # Creates a true multi-access network for DR/BDR election
    br1:
      kind: bridge
    
    # Routers
    r1:
      kind: linux
      image: frrouting/frr:v10.1.1
      binds:
        - configs/daemons:/etc/frr/daemons
        - configs/vtysh.conf:/etc/frr/vtysh.conf
        - configs/r1-frr.conf:/etc/frr/frr.conf
    
    r2:
      kind: linux
      image: frrouting/frr:v10.1.1
      binds:
        - configs/daemons:/etc/frr/daemons
        - configs/vtysh.conf:/etc/frr/vtysh.conf
        - configs/r2-frr.conf:/etc/frr/frr.conf
    
    r3:
      kind: linux
      image: frrouting/frr:v10.1.1
      binds:
        - configs/daemons:/etc/frr/daemons
        - configs/vtysh.conf:/etc/frr/vtysh.conf
        - configs/r3-frr.conf:/etc/frr/frr.conf
    
    r4:
      kind: linux
      image: frrouting/frr:v10.1.1
      binds:
        - configs/daemons:/etc/frr/daemons
        - configs/vtysh.conf:/etc/frr/vtysh.conf
        - configs/r4-frr.conf:/etc/frr/frr.conf

  links:
    # Broadcast segment - R1, R2, R3 all connected to same bridge
    # This creates true multi-access network for DR/BDR election
    - endpoints: ["r1:eth1", "br1:eth1"]
    - endpoints: ["r2:eth1", "br1:eth2"]
    - endpoints: ["r3:eth1", "br1:eth3"]
    
    # Point-to-point link - R1 to R4
    - endpoints: ["r1:eth2", "r4:eth1"]
