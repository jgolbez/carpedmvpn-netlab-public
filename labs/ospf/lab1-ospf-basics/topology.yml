name: ospf-fundamentals

mgmt:
  network: lab-mgmt
  ipv4-subnet: 172.20.0.0/24

topology:
  nodes:
    r1:
      kind: linux
      image: quay.io/frrouting/frr:10.1.0
      mgmt-ipv4: 172.20.0.11
      binds:
        - configs/r1-frr.conf:/etc/frr/frr.conf
        - configs/daemons:/etc/frr/daemons
        - configs/vtysh.conf:/etc/frr/vtysh.conf
        - configs/ssh-setup.sh:ssh-setup.sh
      exec:
        - chmod +x /ssh-setup.sh
        - /ssh-setup.sh
    
    r2:
      kind: linux
      image: quay.io/frrouting/frr:10.1.0
      mgmt-ipv4: 172.20.0.12
      binds:
        - configs/r2-frr.conf:/etc/frr/frr.conf
        - configs/daemons:/etc/frr/daemons
        - configs/vtysh.conf:/etc/frr/vtysh.conf
            - configs/ssh-setup.sh:ssh-setup.sh
      exec:
        - chmod +x /ssh-setup.sh
        - /ssh-setup.sh
    r3:
      kind: linux
      image: quay.io/frrouting/frr:10.1.0
      mgmt-ipv4: 172.20.0.13
      binds:
        - configs/r3-frr.conf:/etc/frr/frr.conf
        - configs/daemons:/etc/frr/daemons
        - configs/vtysh.conf:/etc/frr/vtysh.conf
        - configs/ssh-setup.sh:ssh-setup.sh
      exec:
        - chmod +x /ssh-setup.sh
        - /ssh-setup.sh
  links:
    # Create a triangle topology
    - endpoints: ["r1:eth1", "r2:eth1"]
    - endpoints: ["r2:eth2", "r3:eth1"]  
    - endpoints: ["r3:eth2", "r1:eth2"]
